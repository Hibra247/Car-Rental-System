
#include<iostream>
#include <fstream>
#include <cstdlib>
#include <iomanip>
using namespace std;

// Class representing a Car
class Car{

private:
    int carID;
    string brand;
    string model;
    int year;
    bool availability;
    double rental_price;
    static int Car_count;

public:
    Car(){} // Default constructor needed for array declaration
    Car(int _carID, string _brand, string _model, int _year, double _rental_price): carID(_carID),brand(_brand),model(_model),year(_year),rental_price(_rental_price){Car_count++;};

    // Method to set details of a car
    void setDetail(int _carID, string _brand, string _model, int _year, double _rental_price){
        carID = _carID;
        brand = _brand;
        model = _model;
        year = _year;
        rental_price = _rental_price;
        availability = true; // Assume car is available by default
    }

    // Getter methods for car attributes
    int getId(){return carID;};
    string getBrand(){return brand;};
    string getModel(){return model;};
    int getYear(){return year;};
    double getRentalPrice(){return rental_price;};

    // Method to display car details
    void display(){
        cout << "Car ID: " << carID << endl;
        cout << "Brand: " << brand << endl;
        cout << "Model: " << model << endl;
        cout << "Year: " << year << endl;
        cout << "Rental Price: $" << rental_price << endl;
        cout << "Availability: " << (availability ? "Available" : "Unavailable") << endl;
        cout << endl;
    }

    
};

int Car::Car_count=0;

// Class representing a User
class User{
protected:
    string name;
    string password;

public:
    User(string n, string p) : name(n), password(p) {}
    string getusername(){
        return name;
    }
    string getpassword(){
        return password;
    }

    // Method to store user information in a file
    void storeinfo(){
        ofstream outFile("customer_info.txt", ios::app); // Open file in append mode
        if (outFile.is_open()) {
            outFile << "Username: " << name << ", Password: " << password << endl;
            outFile.close();
            cout << "User information stored in customer_info.txt" << endl;
        } else {
            cout << "Unable to open file!" << endl;
        }
    }
};

class Customer : protected User{
public:
     // Constructor
    Customer(string n, string p) : User(n, p) {}
     void storeinfo(){
        //perform filehandling which write username aand password to "customer.txt"
     }
    void payment() {
           try {
               int cardnumber, cvc;
               string expirydate, name;
               cout << "Credit Card                                               VISA" << endl;
               cout << "Card number :";
               cin >> cardnumber;
               cout << "Expiry Date: ";
               cin >> expirydate;
               cout << "CVC:";
               cin >> cvc;
               if (cin.fail()) {
                   throw runtime_error("Invalid input! Please enter valid card information."); // Throw an exception for invalid input
               }
               cout << "Payment successful" << endl;
           }
           catch (const exception& e) {
               cerr << "Exception occurred: " << e.what() << endl;
               cin.clear(); // Clear error flags
               
           }
       }
   };

// Class representing a Booking Manager, inheriting from User and Car
class BookingManager : protected User, public Car {
private:
    string customername;
    Car customer_car;
    int day;
    double rentalfee;

public:
    BookingManager(string name, string password, string cname, Car c1, int _days, double fee)
        : User(name, password), customer_car(c1), day(_days), rentalfee(fee) {}

    // Method to calculate rental price based on number of days
    double calcPrice() {
        rentalfee = customer_car.getRentalPrice() * day;
        return rentalfee;
    }

    // Method to display rental invoice
    void showrent() {

                // Calculate rental fee if it hasn't been calculated yet
                if (rentalfee == 0.0) {
                    rentalfee = calcPrice();
                }

                // Display rental invoice details
                cout << "\n                       Car Rental - Customer Invoice                  " << endl;
                cout << "    ///////////////////////////////////////////////////////////" << endl;
                cout << "    | Customer Name:" << "-----------------|" << setw(10) << customername << " |" << endl;
                cout << "    | Car Model :" << "--------------------|" << setw(10) << customer_car.getModel() << " |" << endl;
                cout << "    | Car No. :" << "----------------------|" << setw(10) << customer_car.getId() << " |" << endl;
                cout << "    | Car Rental Price is :" << "--------|" << setw(10) << customer_car.getRentalPrice() << " |" << endl;
                cout << "    | Number of days :" << "---------------|" << setw(10) << day << " |" << endl;
                cout << "     ________________________________________________________" << endl;
                cout << "\n";
                cout << "    | Total Rental Amount is :" << "-------|" << setw(10) << rentalfee << " |" << endl;
                cout << "     ________________________________________________________" << endl;
            }
           
    };
int num_cars=25;
int main(){
    
    // Array of Car objects initialized with car details
    Car cars[25]={
        // Car details initialization
        {1, "Toyota", "Camry LE", 2020, 40.0},
                {2, "Ford", "Mustang GT", 2019, 60.0},
                {3, "Honda", "Civic LX", 2021, 45.0},
                {4, "Chevrolet", "Silverado 1500 LT", 2018, 55.0},
                {5, "BMW", "3 Series 330i", 2022, 70.0},
                {6, "Mercedes-Benz", "E-Class E350", 2017, 65.0},
                {7, "Audi", "A4 Premium", 2020, 60.0},
                {8, "Tesla"," Model S Performance", 2023, 150.0},
                {9, "Subaru", "Outback Limited", 2019, 55.0},
                {10, "Nissan", "Altima SV", 2021, 50.0},
                {11, "Ford", "F-150 XLT", 2018, 65.0},
                {12, "Toyota"," Corolla SE", 2020, 40.0},
                {13, "Volkswagen", "Jetta GLI", 2022, 45.0},
                {14, "Hyundai"," Sonata SEL", 2019, 50.0},
                {15, "Jeep", "Wrangler Rubicon", 2021, 80.0},
                {16, "Chevrolet"," Tahoe Premier", 2017, 100.0},
                {17, "Lexus", "RX 350 F Sport", 2020, 90.0},
                {18, "Mazda"," CX-5 Grand Touring", 2019, 55.0},
                {19, "Kia"," Telluride SX", 2022, 80.0},
                {20, "Dodge"," Charger R/T", 2018, 70.0},
                {21, "Subaru"," Forester Touring", 2021, 60.0},
                {22, "Honda"," Accord Sport", 2020, 50.0},
                {23, "Ford"," Explorer Limited", 2019, 70.0},
                {24, "GMC","Sierra 2500HD Denali", 2022, 120.0},
                {25, "BMW", "X5 xDrive40i", 2018, 100.0},
              
             };
// Array of Car objects initialized with car details
   
// Welcome message
    cout << "************************** WELCOME TO ONLINE CAR RENTAL SYSTEM***************************" << endl;

    cout << "Available Cars:" << endl;
    for (int i = 0; i < num_cars; i++) {
        cars[i].display();
    }

    // Prompt user to select a car
    cout << "Enter the car ID you want to rent: ";
    int choice;
    cin >> choice;

    // Find the selected car and get its details
    Car selectedCar;
    for (int i = 0; i < num_cars; i++) {
        if (cars[i].getId() == choice) {
            selectedCar = cars[i];
            break;
        }
    }

    // Prompt user for number of days for rent
    cout << "Enter the number of days for rent: ";
    int day;
    cin >> day;

    // Calculate rental fee and display rental invoice
    BookingManager m1("username", "password", "customername", selectedCar, day, 0.0);
    double totalRentalPrice = m1.calcPrice();
    m1.showrent();
    
    // Create a customer and process payment
      Customer customer("customername", "customerpassword");
      customer.payment();

    return 0;
}




